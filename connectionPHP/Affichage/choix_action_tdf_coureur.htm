<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width = device-width, initial-scale = 1">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="../Affichage/materialize.css">
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
	<script>
		$(document).ready(function () {
			$('select').material_select();
		});
	</script>
	<title>Formulaire de mise à jour de base de données</title>
	<script src="../Affichage/formulaire_coureur.js"></script>
</head>

<body>
	<nav class="grey darken-2">
		<div class="nav-wrapper">
			<a href="../Affichage/page_accueil.htm" ><img id="deco" class="responsive-img" src="../img/deco.png" alt=""></a>
			<ul id="nav-mobile" class="right hide-on-med-and-down">
				<li><a href="../AffichagePHP/annee.php">Infos par année</a></li>
				<li><a href="../AffichagePHP/inserer_tdf_coureur.php" >Insérer un nouveau coureur</a></li>
				<li><a href="../AffichagePHP/modifier_tdf_coureur.php" >Modifier un coureur</a></li>
				<li><a href="../AffichagePHP/supprimer_tdf_coureur.php" >Supprimer coureur</a></li>
			</ul>
		</div>
	</nav>

	<form id="Formulaire_coureur" name="Formulaire_coureur" action="../AffichagePHP/choix_action_tdf_coureur.php"
		method="post" enctype="application/x-www-form-urlencoded">
		<div class="row">
			<div class="col s8">
				<label>Recherche : </label>
				<input type="text" id="nom" name="nom" value="" placeholder=""><br />
			</div>
			<div class="col s4">
				<label>Critère de recherche</label>
				<select name="colonne" id="colonne" onchange="changePlaceHolder()" size="1">
					<option value="NOM"> Nom</option>
					<option value="PRENOM"> Prenom</option>
					<option value="N_COUREUR"> Numéro de coureur</option>
					<option value="ANNEE_PREM"> Annee de première participation</option>
					<option value="ANNEE_NAISSANCE"> Année de naissance</option>
					<option value="COMPTE_ORACLE"> Compte Oracle</option>
					<option value="DATE_INSERT"> Date d'insertion dans la base</option>
				</select>
			</div>
		</div>

		<p id="resultat">
			<span id="r2">en attente de données</span>
		</p>

	</form>

		<script>
			function chargerDonnee(nom, colonne) {
				var xhr = new XMLHttpRequest();
				xhr.open('GET', '../AffichagePHP/affichageCoureurs.php/?nom=' +
					nom + '&column=' + colonne);

				var Lire = function () {
					if (xhr.readyState === 4 && xhr.status === 200) {
						document.getElementById('resultat').innerHTML = '<span>' + xhr.responseText + '</span>';
					}
				}
				xhr.addEventListener("readystatechange", Lire, false);
				xhr.send(null);
			}

			var nomCoureur;
			//défini dans afficherCoureur
			var infosCoureur = function (id) {
				nomCoureur = id.value;
				localStorage["nomC"] = nomCoureur;
				// alert("Tu as cliqué sur le coureur : " + nomCoureur);
			};
			var elt1 = document.getElementById('nom');
			var colonne = document.getElementById('colonne');
			var place = "";

			var changePlaceHolder = function () {
				switch (colonne.value) {
					case 'N_COUREUR':
						place = "440"
						break;
					case 'NOM':
						place = "PAUL"
						break;
					case 'PRENOM':
						place = "Titouan"
						break;
					case 'ANNEE_NAISSANCE':
						place = "1968"
						break;
					case 'ANNEE_PREM':
						place = "1992"
						break;
					case 'COMPTE_ORACLE':
						place = "IUT218"
						break;
					case 'DATE_INSERT':
						place = "17/07/16"
						break;
					default:
						place = "WTF";
						break;
				}
				document.getElementsByName('nom')[0].placeholder = place;
			}
			changePlaceHolder();
			var maFonction1 = function () {
				chargerDonnee(elt1.value, colonne.value);


				// //bouton défini dans afficherCoureur
				// var coureurVal = document.getElementsByName('coureurData');

				// coureurVal.addEventListener("click", infosCoureur);
			};



			elt1.addEventListener("keyup", maFonction1, false);
		</script>
		<script type="text/javascript" src="js/materialize.min.js"></script>
</body>

</html>