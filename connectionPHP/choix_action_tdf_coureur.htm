<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<title>Formulaire de mise à jour de base de données</title>
	<script	 src="../formulaire_coureur.js">     </script>	
</head>

<body>	
		<center><h3> Formulaire de mise à jour de base de donées pour la table coureur</h3></center>	
			<form id="Formulaire_coureur" name="Formulaire_coureur" action="../traitement_tdf_coureur.php" method="post" enctype="application/x-www-form-urlencoded">
			
			<fieldset>
			<h4>Recherchez un nom de coureur : </h4> <br />
			<p>
				<label> nom : </label><input type="text" id="nom" name="nom" value=""><br />
			</p>
			<p id="resultat">
				<span id="r2">en attente de données</span>
			</p>
			</fieldset>
				
			</form>
			
			<fieldset>
			<h4>Quelle action voulez-vous faire ?</h4>
			
			</fieldset>
			<script>
			function chargerDonnee(val) {
			var xhr = new XMLHttpRequest();
			xhr.open('GET', 'https://dev-pphp2a08.users.info.unicaen.fr/Commun/connectionPHP/affichageCoureurs.php/?nom=' +
				val);

			var Lire = function () {
				if (xhr.readyState === 4 && xhr.status === 200) {
					document.getElementById('resultat').innerHTML = '<span>' + xhr.responseText + '</span>';
				}
			}
			xhr.addEventListener("readystatechange", Lire, false);
			xhr.send(null);
		}
		
		var nomCoureur;
		//défini dans afficherCoureur
		var infosCoureur = function (id) {
			nomCoureur = id.innerHTML;
			localStorage["nomC"] = nomCoureur;
			alert("Tu as cliqué sur le coureur : " + nomCoureur);
		};
		var elt1 = document.getElementById('nom');


		var maFonction1 = function () {
			chargerDonnee(elt1.value);


			// //bouton défini dans afficherCoureur
			// var coureurVal = document.getElementsByName('coureurData');

			// coureurVal.addEventListener("click", infosCoureur);
		};



		elt1.addEventListener("keyup", maFonction1, false);
			</script>
</body>

</html>