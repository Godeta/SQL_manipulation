<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<title>Formulaire de mise à jour de base de données</title>
	<script	 src="formulaire_coureur.js">     </script>	
	<script>
		function chargerDonnee(val) {
			var xhr = new XMLHttpRequest();
			xhr.open('GET', 'https://dev-pphp2a08.users.info.unicaen.fr/Commun/connectionPHP/affichageCoureurs.php/?nom=' +
				val);

			var Lire = function () {
				if (xhr.readyState === 4 && xhr.status === 200) {
					document.getElementById('resultat').innerHTML = '<span>' + xhr.responseText + '</span>';
				}
			}
			xhr.addEventListener("readystatechange", Lire, false);
			xhr.send(null);
		}
	</script>
</head>

<body>	
		<center><h3> Formulaire de mise à jour de base de données pour la table coureur</h3></center>	
			<form id="Formulaire_coureur" name="Formulaire_coureur" action="traitement_tdf_coureur.php" method="post" enctype="application/x-www-form-urlencoded">
			
			<fieldset>
			<h4>Recherchez un nom de coureur : </h4> <br />
			<p>
				<label> nom : </label><input type="text" id="nom" name="nom" value=""><br />
			</p>
			<p id="resultat">
				<span id="r2">en attente de données</span>
			</p>
			</fieldset>
			
				<pre>
				<fieldset>	
					<legend>Insérez un nouveau coureur :</legend>
					<label for="nouvNom">nom : </label><input type="text" id="nouvNom" name="nouvNom" size="20" maxlength="60" placeholder="nom du coureur"><br />
					<label for="nouvPrenom">prénom : </label><input type="text" id="nouvPrenom" name="nouvPrenom" placeholder="prénom du coureur" size="20" maxlength="30" pattern="[-Za-z0-9]*"><br /> 
					<label for="annee_naissance">Année de naissance : </label><input type="text" id="annee_naissance" name="annee_naissance" size="20" maxlength="60"  ><br />	
					<label for="annee_prem">Année de première participation : </label><input type="text" id="annee_prem" name="annee_prem" size="20"><br />
					</fieldset>
				</pre>	
					<input type="reset" name="BtRst" value="Effacer">        &nbsp;&nbsp;&nbsp;
					<input type="submit" name="BtSubAjouter" value="Ajouter" onclick="return testerValid()">
				
				<br />
				<pre>
				<fieldset>
					<legend>Modifier un nom de coureur existant :</legend>
					<label for="changNomA"> Ancien nom : </label><input type="text" id="changNomA" name="changNomA" placeholder="Julien"><br />
					<label for="changNomN"> Nouveau nom : </label><input type="text" id="changNomN" name="changNomN" placeholder="Titouan"><br />
				
				</fieldset>	
				</pre>
				<input type="reset" name="BtRst" value="Effacer">        &nbsp;&nbsp;&nbsp;
				<input type="submit" name="BtSubModif" value="Modifier" onclick="return testerValidModif()">
				<br />
				
				<pre>
				<fieldset>					
					<legend>Supprimer un coureur</legend>
					<b>Selon son nom et prénom (attention aux majuscules-minuscules):</b>
					<br/>
					<label for="suppNom"> Nom du coureur : </label><input type="text" id="suppNom" name="suppNom" placeholder="Paul"><br />
					<label for="suppPrenom"> Prenom du coureur : </label><input type="text" id="suppPrenom" name="suppPrenom" placeholder="Test1"><br />
					
					<b>Ou avec son numéro :</b>
					<br />
					<label for="numC"> Numéro du coureur : </label><input type="text" id="numC" name="numC" placeholder="2100">
				</fieldset>
				</pre>
					<input type="reset" name="BtRst" value="Effacer">        &nbsp;&nbsp;&nbsp;
					<input type="submit" name="BtSubSup" value="Supprimer" onclick="return testerValidSup()">			 
				  <br />
				
				
			</form>
			<script>
				var nomCoureur;
				//défini dans afficherCoureur
				var infosCoureur = function (id) {
					nomCoureur = id.innerHTML;
					localStorage["nomC"] = nomCoureur;
					alert("Tu as cliqué sur le coureur : " + nomCoureur);
				};
				var elt1 = document.getElementById('nom');
		
		
				var maFonction1 = function () {
					chargerDonnee(elt1.value);
		
		
					// //bouton défini dans afficherCoureur
					// var coureurVal = document.getElementsByName('coureurData');
		
					// coureurVal.addEventListener("click", infosCoureur);
				};
		
		
		
				elt1.addEventListener("keyup", maFonction1, false);
			</script>
</body>

</html>